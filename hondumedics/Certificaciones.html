<!DOCTYPE html>
<html>

<head>
    <title>Certificaiones | Doctor</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- JQuery JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="./src/funciones.js"></script>


    <!-- Estilos CSS -->
    <style>
        .nav-wrapper {
            background-color: #FC5A5A;
        }

        .waves-effect.waves-pink .waves-ripple {
            background-color: #FC5A5A;
        }

        .btn-white {
            background-color: white;
        }

        .btn-bordes-pink {
            border: #FC5A5A 2px solid;
        }


        .card-image {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            overflow: hidden;
            display: block;
            margin: auto;
        }

        .card-image2 {
            position: relative;
            width: 120px;
            height: 120px;
            overflow: hidden;
            display: block;
            margin: auto;
        }

        /*.circular--portrait {
            position: relative;
            width: 200px;
            height: 200px;
            overflow: hidden;
            border-radius: 50%;
        }*/

        .circular--portrait img {
            width: 100%;
            height: auto;
            margin-left: -50px;
        }

        .circular--landscape {
            display: block;
            position: relative;
            width: 120px;
            height: 120px;
            overflow: hidden;
            border-radius: 50%;
            margin: auto;
        }

        .circular--landscape img {
            width: 100%;
            height: 100%;
            margin-left: 0%;
        }

        .container-1 {
            width: 100%;
            max-width: initial;
        }

        .container-1>.row {
            margin: 0;
        }

        .container-1>.row>.col {
            padding: 0;
        }

        /*Circular Progress bar*/
        .progressbar {
            display: inline-block;
            width: 100px;
            margin: 4px;
        }

        .circle {
            width: 100%;
            /* margin: 0 auto;*/
            margin-top: 5px;
            display: inline-block;
            position: relative;
            text-align: center;
        }

        .circle canvas {
            vertical-align: middle;
        }

        .circle div {
            position: absolute;
            top: 30px;
            left: 0;
            width: 100%;
            text-align: center;
            line-height: 40px;
            font-size: 20px;
        }

        .circle strong i {
            font-style: normal;
            font-size: 0.6em;
            font-weight: normal;
        }

        .circle span {
            display: block;
            color: #aaa;
            margin-top: 12px;
        }

        /*Tabs*/
        .tabs .indicator {
            background-color: #222;
        }

        /*Imagen Redonda*/
        .imgRedonda {
            width: 60px;
            height: 60px;
            border-radius: 150px;
        }

        table {
            width: 100%;
            height: 50½;
            text-align: center;
        }

        th {
            text-align: center;
        }

        td {
            width: 0px;
            height: 30px;
            text-align: center;
        }

        p {
            font-size: 14px;
        }

        .table-responsive {
            display: block;
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            -ms-overflow-style: -ms-autohiding-scrollbar;
        }

        /*.table-wrapper {
            overflow-x: scroll;
            width: 100%;
        }*/

        table {
            width: 100%;
            table-layout: fixed;
        }

        td {
            width: 30px;
            padding: 5px 0 5px;
            text-align: center;
        }

        th {
            width: 75px;
            padding: 5px 0 5px;
            text-align: center;
        }

        body {
            text-align: justify;
        }

        .modal {
            left: 0;
            right: 0;
            background-color: white;
            padding: 0;
            width: 50%;
            will-change: top, opacity;
            max-height: 100%;
        }

        .modal .modal-footer {
            border-radius: 0 0 2px 2px;
            background-color: white;
            padding: 4px 6px;
            height: 45px;
            width: 100%;
            text-align: center;
        }

        .modal-form-row {
            margin-bottom: 0px;
        }

        .sidenav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 22%;
            will-change: opacity;
        }
    </style>
</head>

<body>
    <!-- Formulario de Dashboard -->
    <div class="row">
        <nav class="nav-wrapper">
            <div class="nav-wrapper">
                <a href="" class="left sidenav-trigger hide-on-medium-and-up" data-target="sidenav-1">
                    <i class="material-icons">menu</i></a>
                <div class="col s3"></div>
                <div class="col s9">
                    <a href="index.html" class="brand-logo">HoduMedics</a>
                    <ul class="right hide-on-med-and-down">
                        <!-- Notifications -->
                        <li><a class='dropdown-trigger' href='#' data-target='dropdown2'>
                                <span style="color: #FC5A5A;">Notificaciones</span>
                                <span class="new badge red">3</span><i class="material-icons right">notifications_none
                                    <small class="notification-badge">3</small>
                                </i></a>
                        </li>

                        <!-- Dropdown Trigger Menú Administrador-->
                        <li>
                            <a href="#" class="dropdown-trigger" data-target="dropdown1">
                                Hola, <span style="font-size: 14px; font-weight: bold;" id="username"></span>
                                <i class="material-icons right">arrow_drop_down</i>
                            </a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!-- Dropdown Structure Menú Administrador-->
    <ul id='dropdown1' class='dropdown-content'>
        <li><a href="Perfil.html">
                <span style="color: #464646;">
                    <center>Mi perfil</center>
                </span>
            </a></li>
        <li class="divider"></li>
        <li><a href="Configuracion.html">
                <span style="color: #464646;">
                    <center>Configuración</center>
                </span>
            </a></li>
        <li class="divider"></li>
        <li><a onclick="logoutDoctor();">
                <span style="color: #464646;">
                    <center>Cerrar Sesión</center>
                </span>
            </a></li>
    </ul>

    <!-- Lista de Menú de Notificaciones -->
    <ul id="dropdown2" class="dropdown-content collection with-header">
        <li class="collection-header"><a href="" style="color: red;">Borrar Todo</a></li>

        <li class="collection-item avatar">
            <img src="http://materializecss.com/images/yuna.jpg" alt="" class="circle">
            <center>
                <font face="times new roman" size=1>
                    <p class="noti-details"><span class="noti-title">Dr. Ruby Perrin</span> Schedule <span
                            class="noti-title">her appointment</span></p><span class="new badge red">1</span>
                </font>
                <font face="times new roman">
                    <p class="noti-time"><span class="notification-time">Hace 4 minutos</span></p>
                </font>
            </center>
        </li>
        <li class="collection-item avatar">
            <img src="http://materializecss.com/images/yuna.jpg" alt="" class="circle">
            <center>
                <font face="times new roman" size=1>
                    <p class="noti-details"><span class="noti-title">Charlene Reed</span> has booked her appointment to
                        <span class="noti-title">Dr. Ruby Perrin</span></p><span class="new badge red">1</span>
                </font>
                <font face="times new roman">
                    <p class="noti-time"><span class="notification-time">Hace 10 minutos</span></p>
                </font>
            </center>
        </li>
        <li class="collection-item avatar">
            <img src="http://materializecss.com/images/yuna.jpg" alt="" class="circle">
            <center>
                <font face="times new roman" size=1>
                    <p class="noti-details"><span class="noti-title">Travis Trimble</span> sent a amount of $210 for his
                        <span class="noti-title">appointment</span></p><span class="new badge red">1</span>
                </font>
                <font face="times new roman">
                    <p class="noti-time"><span class="notification-time">Hace 30 minutos</span></p>
                </font>
            </center>
        </li>
    </ul>

    <!-- Dropdown Structure Imágenes de forma redonda en las notificaciones -->
    <ul id="dropdown" class="dropdown-content collection" style="position: absolute; left: 100%;">
        <li class="collection-item avatar">
            <img src="http://materializecss.com/images/yuna.jpg" alt="" class="circle">
            <span class="title">Name</span>
            <p>First Line</p>
            <a href="#!" class="secondary-content"><i class="material-icons">contact_mail</i></a>
        </li>
        <li class="collection-item avatar">
            <img src="http://materializecss.com/images/yuna.jpg" alt="" class="circle">
            <span class="title">Name</span>
            <p>First Line</p>
            <a href="#!" class="secondary-content"><i class="material-icons">contact_mail</i></a>
        </li>
        <li class="collection-item avatar">
            <img src="http://materializecss.com/images/yuna.jpg" alt="" class="circle">
            <span class="title">Name</span>
            <p>First Line</p>
            <a href="#!" class="secondary-content"><i class="material-icons">contact_mail</i></a>
        </li>
    </ul>

    <!-- Menú Oculto-->
    <ul class="sidenav sidenav-fixed" id="sidenav-1">
        <li>
            <div class="user-view">
                <div class="background">
                    <div class="circular--landscape">
                        <img class="profile_picture-doctor">
                    </div>
                </div>
                <br>
                <br>
                <center><span class="black-text name" style="font-size: 14px; font-weight: bold;">
                        <span style="font-size: 15px; font-weight: bold;" id="UserName1"></span></span></center>
                <center><span class="black-text especialidad" style="font-size: 13px; text-align: justify;">Cirugía oral
                        y maxilofacial.
                        <!--<span id="especialidad"></span>--></span></center>
            </div>
        </li>
        <li>
            <a class="link-dashboard-doctores"><i class="material-icons black-text">dashboard</i>Dashboard
            </a>
        </li>
        <li>
            <a class="link-perfil-doctores"><i class="material-icons black-text">account_circle</i>Perfil
            </a>
        </li>

        <li>
            <a class="link-experiencia-laboral"><i class="material-icons black-text">assignment</i>Experiencia Laboral
            </a>
        </li>
        <li>
            <a class="link-educacion"><i class="material-icons black-text">school</i>Educación
            </a>
        </li>
        <li>
            <a class="link-certificaciones"><i class="material-icons black-text">library_books</i>Certificaciones
            </a>
        </li>
        <li>
            <a class="link-citas"><i class="material-icons black-text">date_range</i>Citas
            </a>
        </li>
        <div class="divider"></div>
        <li>
            <a onclick="logoutDoctor();"><i class="material-icons black-text">exit_to_app</i>Cerrar Sesión
            </a>
        </li>
    </ul>
    <!--SideNav Finished-->

    <!--Página de Perfil-->
    <br>
    <!--Card Foto de Perfil-->
    <div class="" style="min-height: 657px;">
        <div class="container-1">
            <div class="page-header">
                <div class="row">
                    <div class="col s12 m6 l3"></div>
                    <div class="col s12 m6 l9">
                        <!--Card Certificaciones-->
                        <div class="card">
                            <div class="card-content">
                                <div class="row">
                                    <form class="col s12 m12 l12 justify">
                                        <left>
                                            <h5><b>Certificaciones</b></h5>
                                        </left>
                                        <br>
                                        <!--Añadir Certificaciones-->
                                        <!--Modal Trigger-->
                                        <a style="color: #FC5A5A"
                                            class="waves-effect waves-light btn btn-white btn-bordes-pink modal-trigger col s12 m6 l3"
                                            href="#modal1"><i class="material-icons left">add</i>Añadir
                                            Certificación</a>

                                        <!--Modal Structure -->
                                        <div id="modal1" class="modal">
                                            <div class="modal-content center">
                                                <h4>AGREGAR CERTIFICACIÓN</h4>

                                                <div class="row">
                                                    <form class="col s12" id="FormCertificacion">
                                                        <div class="row modal-form-row">
                                                            <div class="input-field col s12">
                                                                <i class="material-icons prefix">class</i>
                                                                <input id="icon_qualification_name" type="text"
                                                                    class="validate">
                                                                <label for="icon_qualification_name">Nombre de
                                                                    Certificación</label>
                                                            </div>
                                                            <div class="input-field col s12">
                                                                <i class="material-icons prefix">account_balance</i>
                                                                <input id="icon_institute_name" type="text"
                                                                    class="validate">
                                                                <label for="icon_institute_name">Nombre del
                                                                    Instituto</label>
                                                            </div>
                                                            <div class="input-field col s12">
                                                                <i class="material-icons prefix">date_range</i>
                                                                <input id="icon_start_date" type="text"
                                                                    class="datepicker">
                                                                <label for="icon_start_date">Fecha Inicial</label>
                                                            </div>
                                                            <div class="input-field col s12">
                                                                <i class="material-icons prefix">date_range</i>
                                                                <input id="icon_end_date" type="text"
                                                                    class="datepicker">
                                                                <label for="icon_end_date">Fecha Final</label>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <center>
                                                        <a href=""
                                                            class="btnAgregar modal-action modal-close waves-effect waves-red btn white-text center"
                                                            style="background-color: #2196f3; font-weight: bold;">Agregar</a>
                                                        <a href=""
                                                            class=" btnCancelar modal-action modal-close waves-effect waves-red btn white-text center"
                                                            style="background-color: red; font-weight: bold;">Cancelar</a>
                                                    </center>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <br>
                                <br>
                                <table class="centered" id="table1">
                                    <thead>
                                        <tr>
                                            <th>Nombre de Certificación</th>
                                            <th>Nombre del Instituto</th>
                                            <th>Fecha Inicial</th>
                                            <th>Fecha Final</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!--<tr>
                                            <td>Certificación Médica</td>
                                            <td>Colegio Médicos de Honduras</td>
                                            <td>Sep 19, 1999</td>
                                            <td>Actualidad</td>
                                            <td><a style="position: relative; z-index:0;"
                                                    class="link-editar-certificaciones btn-floating btn-small waves-effect waves-light green btn tooltipped center"
                                                    data-position="bottom" data-tooltip="Editar"><i
                                                        class="material-icons">check</i></a>
                                                <a style="position: relative; z-index:0;"
                                                    class="btnRechazar btn-floating btn-small waves-effect waves-light red btn tooltipped center"
                                                    data-position="bottom" data-tooltip="Eliminar"><i
                                                        class="material-icons">clear</i></a></td>
                                        </tr>-->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        //Este método se utiliza para hacer que una función esté disponible después de cargar el documento.
        $(document).ready(function () {
            if (localStorage.getItem('doctor') !== null) {
                var doctor_id = JSON.parse(localStorage.getItem("doctor")).doctor_id;
                var profile_picture = "";
                $.ajax({
                    url: 'http://localhost:5000/doctorProfiles/getDoctorProfileByDoctorID',
                    dataType: 'json',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ "doctor_id": doctor_id }),
                    processData: false,
                    success: function (profile_data) {
                        console.log(profile_data);

                        //Método Ajax, permite al navegador enviar y recibir datos en  el fondo (background).
                        $.ajax({
                            url: 'http://localhost:5000/qualification/getDoctorQualificationByDoctorId',
                            type: 'POST',
                            dataType: 'json', //added data
                            contentType: 'application/json',
                            data: JSON.stringify({ "doctor_id": doctor_id }),
                            success: function (data) {
                                console.log(data);
                                var datos = data;
                                for (var i = 0; i <= datos.length; i++) {
                                    if (datos[i] != undefined) { //Validar de que el ID no venga nulo o indefinido
                                        $('.tooltipped').tooltip();

                                        //Se eliminó el atributo ID y el id se agregó como una clase
                                        //Se le agregó el atributo data-adminid a cada uno de los 3 botones
                                        $("#table1").append('<tr>' + '<td>' + datos[i].qualification_name + '</td>' +
                                            '<td>' + datos[i].institute_name + '</td>' +
                                            '<td>' + datos[i].initial_date + '</td>' +
                                            '<td>' + datos[i].end_date + '</td>' +
                                            '<td><a style="position:relative; z-index:0;" class="btnEditar btn-floating btn-small waves-effect waves-light green btn tooltipped center" data-position="bottom" data-tooltip="Editar" data-doctorqualificationid=' + datos[i].qualification_id + ' data-doctorqualificationname=' + datos[i].qualification_name + ' data-doctorqualificationinstitutename=' + datos[i].institute_name + ' data-doctorqualificationinitialdate=' + datos[i].initial_date + ' data-doctorqualificationenddate=' + datos[i].end_date + ' data-doctorid=' + datos[i].doctor_id + '><i class="material-icons">edit</i></a><a style="position:relative; z-index:0;" class="btnEliminar btn-floating btn-small waves-effect waves-light red btn tooltipped center" data-position="bottom" data-tooltip="Eliminar" data-doctorid=' + datos[i].doctor_id + '><i class="material-icons">delete_forever</i></a></td>' + '</tr>');
                                    }

                                }

                                //El método click() adjunta una función de controlador de eventos a un elemento HTML.
                                //La función se ejecuta cuando el usuario hace clic en el elemento HTML.
                                //Función Click del boton Editar
                                $(".btnEditar").click(function () {
                                    var qualification_id = parseInt($(this).attr("data-doctorqualificationid"));
                                    var doctor_qualification_name = String($(this).attr("data-doctorqualificationname"));
                                    var doctor_qualification_institute_name = String($(this).attr("data-doctorqualificationinstitutename"));
                                    var doctor_qualification_initial_date = String($(this).attr("data-doctorqualificationinitialdate"));
                                    var doctor_qualification_end_date = String($(this).attr("data-doctorqualificationenddate"));
                                    var doctor_id = parseInt($(this).attr("data-doctorid"));
                                    console.log(qualification_id);
                                    console.log("Editar");

                                    //Redireccionando a editarAdministrador.html y enviando dos parámetros hacia esa página: first_name y last_name
                                    //window.location.href = "./editarAdministrador.html?first_name=" + admin_first_name + "&last_name=" + admin_last_name;
                                    window.location.href = "./editarCertificaciones.html?qualification_id=" + qualification_id + "&qualification_name=" + doctor_qualification_name + "&institute_name=" + doctor_qualification_institute_name + "&initial_date=" + doctor_qualification_initial_date + "&end_date=" + doctor_qualification_end_date + "&doctor_id=" + doctor_id;
                                });

                                //Función Click del boton Eliminar
                                $(".btnEliminar").click(function () {
                                    //Declarar variable eliminar
                                    var eliminar = this;

                                    //Eliminar ID con atributo data
                                    var doctor_id = $(this).data("doctorid");
                                    console.log(admin_id);
                                    console.log("Eliminar");

                                    if (confirm("¿Estás seguro de que deseas eliminar esta fila?")) {

                                        //Método Ajax, permite al navegador enviar y recibir datos en  el fondo (background).
                                        $.ajax({
                                            url: 'http://localhost:5000/doctorQualification/deleteDoctorQualification',
                                            type: 'POST',
                                            dataType: "json",
                                            contentType: "application/json",
                                            data: JSON.stringify({ "doctor_id": doctor_id }),
                                            success: function () {
                                                //Eliminando la fila de la tabla HTML
                                                $(eliminar).closest('tr').fadeOut(1000, function () {
                                                    $(this).remove();
                                                });
                                            }
                                        });
                                    }
                                });
                            }
                        });

                        $("#username").text(profile_data.doctor_profile.first_name);
                        $("#UserName1").text(profile_data.doctor_profile.first_name + " " + profile_data.doctor_profile.last_name);

                        if (profile_data.doctor_profile.profile_picture !== null) {
                            $(".profile_picture-doctor").attr('src', profile_data.doctor_profile.profile_picture)
                        } else {
                            $(".profile_picture-doctor").attr('src', "data:image/png;base64,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");
                        }

                        //Inicialización de las propiedades de Materialize css.
                        M.AutoInit();
                        $('.sidenav').sidenav();
                        $('.sidenav-1').sidenav({ edge: 'left' });
                        $('.dropdown-trigger').dropdown({
                            coverTrigger: false,
                            belowOrigin: true
                        });
                        $('.modal').modal();
                        $('.datepicker').datepicker({
                            container: 'body'
                        });
                        $('#datepicker').datepicker().datepicker('setDate', new Date());
                        $('.tooltipped').tooltip();

                        $('.btnAgregar').click(function (e) {
                            e.preventDefault(); //Detiene la acción predeterminada de un elemento.
                            var nombre_certificacion = $("#icon_qualification_name").val();
                            var nombre_institucion = $("#icon_institute_name").val();
                            var fecha_inicial = $("#icon_start_date").val();
                            var fecha_final = $("#icon_end_date").val();

                            var valido = true;
                            //Validar Experiencia Laboral
                            if (nombre_certificacion == "" || nombre_certificacion.length === 0) {
                                alert("El Nombre De La Certificación Está Vacío");
                                valido = false;
                            }

                            if (nombre_institucion == "" || nombre_institucion.length === 0) {
                                alert("El Nombre De La Institución Está Vacío");
                                valido = false;
                            }

                            if (fecha_inicial == "" || fecha_inicial.length === 0) {
                                alert("La Fecha Inicial Está Vacía");
                                valido = false;
                            }

                            if (fecha_final == "" || fecha_final.length === 0) {
                                alert("La Fecha Final Está Vacía");
                                valido = false;
                            }

                            var form = $("#FormCertificacion");
                            //$("#FormExperiencia")[0].reset();
                            //Método Ajax, permite al navegador enviar y recibir datos en  el fondo (background).
                            if (valido) {
                                $.ajax({
                                    url: 'http://localhost:5000/qualification/newDoctorQualification',
                                    dataType: 'json',
                                    type: 'POST',
                                    contentType: 'application/json',
                                    data: JSON.stringify({
                                        "qualification_name": nombre_certificacion,
                                        "institute_name": nombre_institucion,
                                        "initial_date": fecha_inicial,
                                        "end_date": fecha_final,
                                        "doctor_id": doctor_id
                                    }),
                                    processData: false,
                                    success: function (data) {
                                        console.log(data);
                                        if (data.added) {
                                            var certification = data.certification;
                                            //Mensaje de notificacion personalizado
                                            Swal.fire({
                                                title: 'Excelente!',
                                                text: 'Su Certificación ha sido agregada con éxito',
                                                icon: 'success',
                                                confirmButtonText: 'Entendido'
                                            });
                                            $("#table1").append('<tr>' + '<td>' + qualification.qualification_name + '</td>' +
                                                '<td>' + qualification.institute_name + '</td>' +
                                                '<td>' + qualification.initial_date + '</td>' +
                                                '<td>' + qualification.end_date + '</td>' +
                                                '<td><a style="position:relative; z-index:0;" class="btnEditar btn-floating btn-small waves-effect waves-light green btn tooltipped center" data-position="bottom" data-tooltip="Editar" data-doctorqualificationid=' + qualification.qualification_id + ' data-doctorqualificationname=' + qualification.qualification_name + ' data-doctorqualificationinstitutename=' + qualification.institute_name + ' data-doctorqualificationinitialdate=' + qualification.initial_date + ' data-doctorqualificationenddate=' + qualification.end_date + ' data-doctorid=' + qualification.doctor_id + '><i class="material-icons">edit</i></a><a style="position:relative; z-index:0;" class="btnEliminar btn-floating btn-small waves-effect waves-light red btn tooltipped center" data-position="bottom" data-tooltip="Eliminar" data-doctorid=' + qualification.doctor_id + '><i class="material-icons">delete_forever</i></a></td>' + '</tr>');
                                            form[0].reset();
                                        }
                                    },
                                    error: function (error) {
                                        console.log(error);
                                        if (error.status === 403) {
                                            alert("Ya existe esta educación");
                                        }
                                    }
                                });
                            } else {
                                alert("Hay errores en el formulario");
                            }
                        });

                        $('.btnCancelar').click(function () {
                            $("#FormCertificacion")[0].reset();
                        });



                        //Evento Click del link con clase llamada link-dashboard-doctores
                        $(".link-dashboard-doctores").click(function () {

                            //las variables first_name, last_name y email estan declaradas en las lineas 667 y 668 respectivamente
                            window.location.href = "./DashboardDoctores.html";
                        });

                        //Evento Click del link con clase llamada link-perfil-doctores
                        $(".link-perfil-doctores").click(function () {
                            //las variables first_name y last_name estan declaradas en las lineas 667 y 668 respectivamente
                            window.location.href = "./PerfilDeDoctor.html";
                        });

                        //Evento Click del link con clase llamada link-experiencia-laboral
                        $(".link-experiencia-laboral").click(function () {

                            //las variables first_name y last_name estan declaradas en las lineas 667 y 668 respectivamente
                            window.location.href = "./ExperienciaLaboral.html";
                        });

                        //Evento Click del link con clase llamada link-educacion
                        $(".link-educacion").click(function () {

                            //las variables first_name y last_name estan declaradas en las lineas 667 y 668 respectivamente
                            window.location.href = "./Educacion.html";
                        });

                        //Evento Click del link con clase llamada link-certificaciones
                        $(".link-certificaciones").click(function () {

                            //las variables first_name y last_name estan declaradas en las lineas 667 y 668 respectivamente
                            window.location.href = "./Certificaciones.html";
                        });

                        //Evento Click del link con clase llamada link-citas
                        $(".link-citas").click(function () {

                            //las variables first_name y last_name estan declaradas en las lineas 667 y 668 respectivamente
                            window.location.href = "./Citas.html";
                        });

                        //Evento Click del link con clase llamada link-certificaciones
                        $(".link-editar-certificaciones").click(function () {

                            //las variables first_name y last_name estan declaradas en las lineas 667 y 668 respectivamente
                            window.location.href = "./EditarCertificaciones.html";
                        });
                    }
                });
            } else {
                window.location.href = "./LoginDoctor.html";
            }


        }); 
    </script>
</body>

</html>